<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Sleep Outside | Cedar Ridge Rimrock 2-person tent</title>
    <link rel="stylesheet" href="../css/style.css" />
    <script src="../js/product.js" type="module"></script>
  </head>

  <body>
    <header class="divider">
      <!-- Logo and cart can go here -->
    </header>

    <main class="divider">
      <section class="product-detail">
        <h3 id="productName"></h3>
        <h2 class="divider" id="productNameWithoutBrand"></h2>

        <!-- Product image with discount badge -->
        <div class="product-image-wrapper" style="position: relative;">
          <img
            id="productImage"
            class="divider"
            src=""
            alt=""
          />
          <span id="discountBadge" class="discount-badge hide"
            style="position:absolute; top:10px; left:10px; background:red; color:white; padding:5px; font-weight:bold; border-radius:5px;"></span>
        </div>

        <!-- Price -->
        <p class="product-card__price">
          <span id="productPrice"></span>
          <span id="originalPrice" class="original-price hide" style="text-decoration:line-through; color:#888; margin-left:5px;"></span>
        </p>

        <!-- Color -->
        <p class="product__color" id="productColor"></p>

        <!-- Description -->
        <p class="product__description" id="productDescription"></p>

        <div class="product-detail__add">
          <button id="addToCart" data-id="">Add to Cart</button>
        </div>
      </section>
    </main>

    <footer></footer>

    <script type="module">
      import { tents } from '../js/productList.mjs';

      // Example: using the first tent for demonstration
      const tent = tents[0];

      const productName = document.getElementById('productName');
      const productNameWithoutBrand = document.getElementById('productNameWithoutBrand');
      const productImage = document.getElementById('productImage');
      const productPrice = document.getElementById('productPrice');
      const originalPrice = document.getElementById('originalPrice');
      const discountBadge = document.getElementById('discountBadge');
      const productColor = document.getElementById('productColor');
      const productDescription = document.getElementById('productDescription');
      const addToCartBtn = document.getElementById('addToCart');

      productName.textContent = tent.Brand.Name;
      productNameWithoutBrand.textContent = tent.NameWithoutBrand;
      productImage.src = tent.Image;
      productImage.alt = tent.NameWithoutBrand;

      // Show price and discount
      productPrice.textContent = `$${tent.FinalPrice.toFixed(2)}`;
      if (tent.ListPrice > tent.FinalPrice) {
        originalPrice.textContent = `$${tent.ListPrice.toFixed(2)}`;
        originalPrice.classList.remove('hide');

        // Calculate discount percentage
        const discountPercent = Math.round(((tent.ListPrice - tent.FinalPrice) / tent.ListPrice) * 100);
        discountBadge.textContent = `${discountPercent}% OFF`;
        discountBadge.classList.remove('hide');
      }

      // Color
      if (tent.Colors && tent.Colors.length > 0) {
        productColor.textContent = `Color: ${tent.Colors[0].ColorName}`;
      }

      // Description
      productDescription.innerHTML = tent.DescriptionHtmlSimple;

      // Add to cart
      addToCartBtn.dataset.id = tent.Id;
    </script>
  </body>
</html>
